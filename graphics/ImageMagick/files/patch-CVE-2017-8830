From e3c6338e3a1fe003abf581b5f99f20d94c520e7e Mon Sep 17 00:00:00 2001
From: Dirk Lemstra <dirk@git.imagemagick.org>
Date: Sun, 7 May 2017 11:12:37 +0200
Subject: [PATCH] Replace image in list to fix issue reported in #467.

---
 coders/bmp.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/coders/bmp.c b/coders/bmp.c
index d58ba768c6..bf9a0f7245 100644
--- coders/bmp.c
+++ coders/bmp.c
@@ -1390,7 +1390,7 @@ static Image *ReadBMPImage(const ImageInfo *image_info,ExceptionInfo *exception)
         if (flipped_image != (Image *) NULL)
           {
             DuplicateBlob(flipped_image,image);
-            image=DestroyImage(image);
+            ReplaceImageInList(&image, flipped_image);
             image=flipped_image;
           }
       }
